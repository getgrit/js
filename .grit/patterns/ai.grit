language js

// Given a question and a list of choices,
function ai_ask($question, $choices) {
  $choice_text = join($choices, `, `),
  $messages = [
    {
      role: "system",
      content: `Answer all questions with a single word. Choices: $choice_text`
    },
    {
      role: "user",
      content: $question
    }
  ],
  $answer = llm_choice($messages, $choices),
  return $answer
}

// Given a question and a list of choices,
pattern ai_is($condition, $examples, $counter_examples) {
  $item_to_check where {
    $messages = [
      {
        role: "system",
        content: `Classify whether the input code should match this condition: $condition. Answer with yes or no.`
      }
    ],
    
    $answer = llm_choice($messages, choices=["yes", "no"]),
    $answer <: "yes"
  }
}
